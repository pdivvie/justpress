<%= link_to fa_icon('plus'), new_match_path %>
<% if policy(@players).new? %>
  <%= link_to fa_icon('user-plus'), new_player_path %>
<% end %>
<% if policy(@players).destroy? %>
  <%= link_to fa_icon('user'), players_path %>
<% end %>

<hr>

<nav class="breadcrumb">
  <%= link_to 'Match Database', matches_path, class: 'breadcrumb-item' %>
  <span class="breadcrumb-item active">Matches</span>

  <span class="ml-auto">
    <li class="nav-item dropdown">
      <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Select A Game
      </a>
      <div class="dropdown-menu scrollable-menu" aria-labelledby="navbarDropdownMenuLink">
        <% Game.order('title ASC').each do |game| %>
          <%= link_to game.title, game_path(game), class: "dropdown-item" %>
        <% end %>
      </div>
    </li>
  </span>

  <span class="ml-auto">
    <li class="nav-item dropdown">
      <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Select A Character (future feature)
      </a>
      <div class="dropdown-menu scrollable-menu" aria-labelledby="navbarDropdownMenuLink">
        <% Character.order('title ASC').each do |character| %>
          <%= link_to character.title, matches_path(C1: character.title ), class: "dropdown-item" %>
        <% end %>
      </div>
    </li>
  </span>

  <span class="ml-auto">
    <li class="nav-item dropdown">
      <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Select A Player
      </a>
      <div class="dropdown-menu scrollable-menu" aria-labelledby="navbarDropdownMenuLink">
        <% Player.order('username ASC').each do |player| %>
          <%= link_to player.username, matches_path(P1: player.username ), class: "dropdown-item" %>
        <% end %>
      </div>
    </li>
  </span>
</nav>

<div class="card matches-card">
  <% @matches.order('created_at DESC').each do |match| %>
    <div class="row">
      <div class="col-md-2">
        <div class="p-alt2">
          <p><%= link_to match.game.title, game_path(match.game_id) unless match.game_id == nil %></p>
        </div>
      </div>

      <div class="col-md-2">
        <% if match.p1_name != nil %>
          <div class="p-alt">
            <p><%= link_to match.p1_name, matches_path(P1: match.p1_name) %><p>
          </div>
        <% else %>
          Unknown Player
        <% end %>
      </div>

      <div class="col-md-1">
        <% if match.p1_character != nil %>
          <div class="avatar">
            <%= image_tag(match.p1_character, size: 64) %>
          </div>
        <% else %>
          Unknown Character
        <% end %>
      </div>

      <div class="col-md-1">
        <div class="p-alt">
          <p>vs</p>
        </div>
      </div>

      <div class="col-md-1">
         <% if match.p2_character != nil %>
          <div class="avatar">
            <%= image_tag(match.p2_character, size: 64) 
            %>
          </div>
        <% else %>
          Unknown Character
        <% end %>
      </div>

      <div class="col-md-2">
        <% if match.p2_name != nil %>
        <div class="p-alt">
          <p><%= link_to match.p2_name, matches_path(P1: match.p2_name) %><p>
        </div>
        <% else %>
          Unknown Player
        <% end %>
      </div>

      <div class="col-md-3">
        <div class="p-alt3">
          <%= link_to fa_icon('play'), match.link, target: :_blank %>
          <% if policy(match).update? %>
            <%= link_to fa_icon('pencil'), edit_match_path(match) %>
            <%= link_to fa_icon('trash'), match, method: :delete, data: { confirm: 'Are you sure?' } %>
          <% end %>
        </div>
      </div>
    </div>

    <hr>

  <% end %>
</div>






